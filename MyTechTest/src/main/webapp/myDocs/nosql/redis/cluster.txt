redis 集群 tcp端口：
每个redis集群节点都需要打开两个tcp连接。一个普通的redis tcp端口用来服务客户端，例如：6379。把这个端口加10000作为数据端口，本例中为16379。
这第二个大端口被用来做集群总线，这是一个用二进制协议在节点到节点的通信通道。集群总线被节点用作失败探测、配置更新、failover authorization等等。
客户端永远不会和集群总线通信，但总是和普通的命令端口通信。无论如何，要确保在你的防火墙里打开两个端口，否则redis集群节点之间无法通信。
命令端口和集群总线端口的偏移量是固定的并总是10000。

redis集群数据碎片：
redis集群不使用一致性哈希，而是将每个键分配到一个我们称为“哈希槽”的地方。
redis集群有16384个哈希槽，计算一个给定的键属于哪个槽。计算方法是对一个键采用crc16算法后对16384取模。
每个redis集群节点对哈希槽的一个子集负责。因此，假设你有一个拥有三个节点的redis集群，如下：
节点A包含哈希槽：0-5500。
节点B包含哈希槽：5501-11000。
节点C包含哈希槽：11001-16384。

在集群里很容易添加节点和删除节点。例如，我希望添加一个节点D，我需要从A、B、C节点中迁移一些哈希槽到节点D。相似的，如果我希望删除节点A，我只要将A的哈希槽移到
B和C，当节点A为空之后，我就可以彻底从集群中删除它。

因为移动哈希槽从一个节点到另一个节点不需要停止操作。因此添加或删除节点，或改变节点拥有的哈希槽，不需要停机时间。

redis集群的主从模式：
